<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GoTo Browser</title>
<style>
  body, html { margin:0; padding:0; font-family: Arial; overflow:hidden; transition: background 0.3s, color 0.3s;}
  body.light { background:#fafafa; color:#111; }
  body.dark { background:#111; color:#fafafa; }
  body.blue { background:#001f3f; color:#fff; }

  #intro, #loading, #homepage, #tutorial { position:absolute; top:0; left:0; width:100%; height:100%; display:none; }

  /* Intro */
  #intro { background:#111; color:#fff; display:flex; align-items:center; justify-content:center; flex-direction:column; perspective:1000px; }
  .title { font-size:3em; transform: rotateY(0deg); animation: rotateIn 3s forwards; }
  @keyframes rotateIn { 0%{ transform: rotateY(90deg); opacity:0; } 100%{ transform: rotateY(0deg); opacity:1; } }

  /* Loading */
  #loading { background:#222; display:flex; align-items:center; justify-content:center; color:#fff; font-size:2em; flex-direction:column; z-index:9999; position:absolute; width:100%; height:100%; }
  .circle { border: 8px solid #f3f3f3; border-top: 8px solid #3498db; border-radius:50%; width:60px; height:60px; animation: spin 1s linear infinite; margin-top:20px; }
  @keyframes spin {0%{ transform: rotate(0deg);} 100%{ transform:rotate(360deg);} }

  /* Homepage */
  #homepage { display:flex; flex-direction:column; height:100%; width:100%; }
  #toolbar { display:flex; align-items:center; padding:5px; background:#ddd; overflow-x:auto; }
  .icon { width:50px; height:50px; background:#3498db; color:#fff; display:flex; align-items:center; justify-content:center; border-radius:10px; margin:2px; cursor:pointer; flex-shrink:0; }
  .icon:hover { transform: scale(1.1); }
  #topSearchBar { flex:1; padding:5px; font-size:1em; margin:0 5px; border-radius:5px; border:1px solid #aaa; }

  #tabBar { display:flex; background:#ccc; padding:5px; overflow-x:auto; }
  .tab { padding:5px 10px; margin-right:5px; background:#bbb; border-radius:5px; cursor:pointer; display:flex; align-items:center; }
  .tab.active { background:#3498db; color:#fff; }
  .closeTab { margin-left:5px; font-weight:bold; cursor:pointer; }

  #browserFrame { flex:1; border:none; width:100%; height:calc(100% - 120px); }

  /* Homepage content */
  #homeContent { display:flex; flex-direction:column; align-items:center; justify-content:center; flex:1; }
  #homeContent h1 { font-size:3em; margin-bottom:20px; text-align:center; }
  #homeContent #homeSearch { width:50%; padding:10px; font-size:1.2em; border-radius:5px; border:1px solid #aaa; }

  /* Tutorial */
  #tutorial { background:rgba(0,0,0,0.8); color:#fff; display:flex; flex-direction:column; align-items:center; justify-content:center; font-size:1.5em; text-align:center; padding:20px; }
  .highlight { border:2px solid yellow; animation: blink 1s infinite; }
  @keyframes blink {0%,100%{border-color:yellow;} 50%{border-color:red;} }

  /* Settings modal */
  #settingsModal { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; padding:20px; border-radius:10px; display:none; z-index:1000; width:300px;}
  #settingsModal.dark { background:#222; color:#fff; }
</style>
</head>
<body class="light">

<!-- Intro Animation -->
<div id="intro">
  <div class="title">Welcome to GoTo Browser</div>
  <audio id="introSound" src="intro.mp3"></audio>
</div>

<!-- Loading -->
<div id="loading">
  Loading
  <div class="circle"></div>
</div>

<!-- Homepage -->
<div id="homepage">
  <div id="toolbar">
    <div class="icon" onclick="showHome()">üè†</div>
    <div class="icon" onclick="showHistory()">üìú</div>
    <div class="icon" onclick="showBookmarks()">üîñ</div>
    <div class="icon" onclick="showDownloads()">‚¨áÔ∏è</div>
    <div class="icon" onclick="startTutorial()">‚ùì</div>
    <div class="icon" onclick="openSettings()">‚öôÔ∏è</div>
    <input type="text" id="topSearchBar" placeholder="Search or enter URL">
    <div class="icon" onclick="addTab()">‚ûï</div>
  </div>

  <div id="tabBar"></div>

  <div id="homeContent">
    <h1>Welcome to GoTo Browser</h1>
    <input type="text" id="homeSearch" placeholder="Search the web from home page">
  </div>

  <iframe id="browserFrame"></iframe>
</div>

<!-- Tutorial -->
<div id="tutorial">
  <audio id="tutorialMusic" src="tutorial.mp3" loop autoplay></audio>
  <div id="tutorialText">Step 1: Top toolbar search bar</div>
  <button onclick="nextStep()">Next</button>
</div>

<!-- Settings Modal -->
<div id="settingsModal">
  <h3>Settings</h3>
  <label>Theme:</label>
  <select id="themeSelect" onchange="changeTheme(this.value)">
    <option value="light">Light</option>
    <option value="dark">Dark</option>
    <option value="blue">Blue</option>
  </select>
  <br><br>
  <button onclick="closeSettings()">Close</button>
</div>

<script>
let tutorialStep=0;
let blockedSites=["example.com","badsite.com"];
let tabs=[];
let activeTab=null;

// Intro & Loading
function showIntro(){
  const intro=document.getElementById('intro');
  intro.style.display="flex";
  document.getElementById('introSound').play();
  setTimeout(()=>{ intro.style.display="none"; showLoading(); },4000);
}
function showLoading(){
  const loading=document.getElementById('loading');
  loading.style.display="flex";
  setTimeout(()=>{ loading.style.display="none"; showHomepage(); },3000);
}

// Homepage
function showHomepage(){
  document.getElementById('homepage').style.display="flex";
  showHome();
  addTab();
}
function showHome(){
  document.getElementById('homeContent').style.display='flex';
  document.getElementById('browserFrame').src='about:blank';
}

// Toolbar search
document.getElementById('topSearchBar').addEventListener('keydown', function(e){
  if(e.key==='Enter') loadWebsite(this.value);
});
document.getElementById('homeSearch').addEventListener('keydown', function(e){
  if(e.key==='Enter') loadWebsite(this.value);
});

// Tabs
function addTab(){
  let tabId=tabs.length;
  tabs.push({id:tabId,url:'home'});
  activeTab=tabId;
  updateTabBar();
  document.getElementById('browserFrame').src='about:blank';
  document.getElementById('homeContent').style.display='flex';
}
function closeTab(id){
  tabs=tabs.filter(t=>t.id!==id);
  if(activeTab===id) activeTab=tabs.length?tabs[0].id:null;
  updateTabBar();
  if(activeTab!==null){
    if(tabs[activeTab].url==='home'){
      document.getElementById('homeContent').style.display='flex';
      document.getElementById('browserFrame').src='about:blank';
    }else loadWebsite(tabs[activeTab].url);
  } else {
    document.getElementById('browserFrame').src='about:blank';
    document.getElementById('homeContent').style.display='flex';
  }
}
function switchTab(id){
  activeTab=id;
  if(tabs[activeTab].url==='home'){
    document.getElementById('homeContent').style.display='flex';
    document.getElementById('browserFrame').src='about:blank';
  } else loadWebsite(tabs[activeTab].url);
  updateTabBar();
}
function updateTabBar(){
  const tabBar=document.getElementById('tabBar');
  tabBar.innerHTML='';
  tabs.forEach(tab=>{
    const tabDiv=document.createElement('div');
    tabDiv.className='tab'+(tab.id===activeTab?' active':'');
    tabDiv.innerText=tab.url==='home'?'Home':'Tab '+(tab.id+1);
    tabDiv.onclick=()=>switchTab(tab.id);
    const closeBtn=document.createElement('span');
    closeBtn.innerText='√ó';
    closeBtn.className='closeTab';
    closeBtn.onclick=(e)=>{e.stopPropagation(); closeTab(tab.id);};
    tabDiv.appendChild(closeBtn);
    tabBar.appendChild(tabDiv);
  });
}

// Load website
function loadWebsite(url){
  if(!navigator.onLine){
    alert("‚ö†Ô∏è No internet connection!");
    return;
  }
  if(!url.startsWith('http')) url='https://'+url;
  if(blockedSites.some(site=>url.includes(site))){ alert("This website is blocked."); return; }
  document.getElementById('homeContent').style.display='none';
  document.getElementById('loading').style.display='flex';
  setTimeout(()=>{
    document.getElementById('loading').style.display='none';
    document.getElementById('browserFrame').src=url;
    if(activeTab!==null) tabs[activeTab].url=url;
    updateTabBar();
  },2000);
}

// Dummy history/bookmarks/downloads
function showHistory(){ alert("History is empty."); }
function showBookmarks(){ alert("Bookmarks are empty."); }
function showDownloads(){ alert("Downloads are empty."); }

// Tutorial
function startTutorial(){
  tutorialStep=0;
  document.getElementById('tutorial').style.display='flex';
  document.getElementById('tutorialMusic').play();
  showTutorialStep();
}
function showTutorialStep(){
  const tutorialText=document.getElementById('tutorialText');
  switch(tutorialStep){
    case 0: tutorialText.innerText="Step 1: Top toolbar search bar"; break;
    case 1: tutorialText.innerText="Step 2: Home button returns to homepage"; break;
    case 2: tutorialText.innerText="Step 3: Tabs can be added or closed"; break;
    case 3: tutorialText.innerText="Step 4: Themes and settings"; break;
    case 4: tutorialText.innerText="Step 5: History, bookmarks, downloads"; break;
    case 5: 
      document.getElementById('tutorial').style.display='none';
      document.getElementById('tutorialMusic').pause();
      return;
  }
}
function nextStep(){ tutorialStep++; showTutorialStep(); }

// Themes
function openSettings(){ const modal=document.getElementById('settingsModal'); modal.style.display='block'; modal.className=document.body.className; }
function closeSettings(){ document.getElementById('settingsModal').style.display='none'; }
function changeTheme(theme){ document.body.className=theme; document.getElementById('settingsModal').className=theme; }

// Internet detection alerts
window.addEventListener('offline',()=>alert("‚ö†Ô∏è You are offline"));
window.addEventListener('online',()=>alert("‚úÖ You are online"));

// Start
showIntro();
</script>
</body>
</html>
